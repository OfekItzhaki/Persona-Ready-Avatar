@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import responsive styles */
@import './mobile.css';
@import './tablet.css';

/**
 * Theme CSS with WCAG AA Contrast Compliance
 * 
 * This stylesheet defines comprehensive light and dark theme color palettes
 * that meet WCAG AA contrast requirements:
 * - 4.5:1 contrast ratio for normal text
 * - 3:1 contrast ratio for large text and UI components
 * 
 * Themes are applied via classes on document.documentElement:
 * - .light for light theme
 * - .dark for dark theme
 * 
 * Requirements: 23, 37
 */

/* ============================================
   Design Token CSS Custom Properties
   ============================================ */

:root {
  /* Design token colors - will be overridden by theme */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #e8e8e8;
  --bg-glass: rgba(255, 255, 255, 0.8);
  
  --fg-primary: #1a1a1a;
  --fg-secondary: #4a4a4a;
  --fg-tertiary: #6b6b6b;
  
  --border-primary: #d4d4d4;
  --border-secondary: #e8e8e8;
  --border-focus: #2563eb;
  
  --interactive-primary: #2563eb;
  --interactive-primary-hover: #1d4ed8;
  --interactive-primary-active: #1e40af;
  --interactive-secondary: #6b7280;
  --interactive-secondary-hover: #4b5563;
  
  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --gradient-secondary: linear-gradient(to right, #f5f5f5, #ffffff, #f5f5f5);
  --gradient-mesh: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(168, 85, 247, 0.05) 50%, rgba(236, 72, 153, 0.05) 100%);
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.3);
  
  /* Typography */
  --font-family-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-family-mono: "Fira Code", "Cascadia Code", "Courier New", Courier, monospace;
  --font-family-display: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* ============================================
   Base Theme Variables
   ============================================ */

:root {
  /* Transition timing for smooth theme switching */
  --theme-transition-duration: 200ms;
  --theme-transition-timing: ease-in-out;
  
  /* Typography */
  --font-family-base: Arial, Helvetica, sans-serif;
  --font-family-mono: 'Courier New', Courier, monospace;
  
  /* Spacing scale */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  
  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-full: 9999px;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

/* ============================================
   Light Theme
   ============================================ */

.light {
  /* Background colors */
  --background-primary: #ffffff;        /* Pure white background */
  --background-secondary: #f5f5f5;      /* Light gray for cards/panels */
  --background-tertiary: #e8e8e8;       /* Slightly darker for hover states */
  --background-overlay: rgba(0, 0, 0, 0.5); /* Modal backdrop */
  
  /* Foreground/Text colors - WCAG AA compliant on backgrounds */
  --foreground-primary: #1a1a1a;        /* Primary text - 17.4:1 on white */
  --foreground-secondary: #4a4a4a;      /* Secondary text - 8.9:1 on white */
  --foreground-tertiary: #6b6b6b;       /* Tertiary text - 5.3:1 on white */
  --foreground-disabled: #757575;       /* Disabled text - 4.6:1 on white (FIXED) */
  --foreground-inverse: #ffffff;        /* Text on dark backgrounds */
  
  /* Border colors */
  --border-primary: #767676;            /* Primary borders - 4.5:1 on white (FIXED) */
  --border-secondary: #e8e8e8;          /* Subtle borders */
  --border-focus: #2563eb;              /* Focus indicator */
  
  /* Interactive colors */
  --interactive-primary: #2563eb;       /* Primary buttons/links - 5.2:1 on white */
  --interactive-primary-hover: #1d4ed8; /* Hover state - 6.7:1 on white */
  --interactive-primary-active: #1e40af; /* Active state - 7.5:1 on white */
  --interactive-secondary: #6b7280;     /* Secondary buttons - 5.4:1 on white */
  --interactive-secondary-hover: #4b5563; /* Hover state - 8.6:1 on white */
  
  /* Status colors - WCAG AA compliant */
  --status-success: #0f7a38;            /* Success green - 4.5:1 on white (FIXED) */
  --status-success-bg: #dcfce7;         /* Success background */
  --status-warning: #946200;            /* Warning yellow - 4.5:1 on white (FIXED) */
  --status-warning-bg: #fef9c3;         /* Warning background */
  --status-error: #dc2626;              /* Error red - 4.8:1 on white */
  --status-error-bg: #fee2e2;           /* Error background */
  --status-info: #2563eb;               /* Info blue - 5.2:1 on white */
  --status-info-bg: #dbeafe;            /* Info background */
  
  /* Message colors */
  --message-user-bg: #eff6ff;           /* User message background */
  --message-user-text: #1e3a8a;         /* User message text - 8.6:1 on bg */
  --message-agent-bg: #f5f5f5;          /* Agent message background */
  --message-agent-text: #1a1a1a;        /* Agent message text - 14.5:1 on bg */
  
  /* UI component colors */
  --input-bg: #ffffff;                  /* Input background */
  --input-border: #d4d4d4;              /* Input border */
  --input-border-focus: #2563eb;        /* Input focus border */
  --input-text: #1a1a1a;                /* Input text */
  --input-placeholder: #9e9e9e;         /* Placeholder text */
  
  --button-primary-bg: #2563eb;         /* Primary button background */
  --button-primary-text: #ffffff;       /* Primary button text - 4.6:1 on bg */
  --button-primary-hover: #1d4ed8;      /* Primary button hover */
  --button-secondary-bg: #f5f5f5;       /* Secondary button background */
  --button-secondary-text: #1a1a1a;     /* Secondary button text */
  --button-secondary-hover: #e8e8e8;    /* Secondary button hover */
  
  /* Audio visualizer colors */
  --audio-waveform: #2563eb;            /* Waveform color */
  --audio-waveform-bg: #f5f5f5;         /* Waveform background */
  
  /* Performance monitor colors */
  --perf-good: #16a34a;                 /* FPS ≥60 */
  --perf-medium: #ca8a04;               /* FPS 30-59 */
  --perf-poor: #dc2626;                 /* FPS <30 */
  
  /* Avatar customizer colors */
  --swatch-border: #d4d4d4;             /* Color swatch border */
  --swatch-border-selected: #2563eb;    /* Selected swatch border */
  
  /* Shadows with light theme opacity */
  --shadow-color: rgba(0, 0, 0, 0.1);
}

/* ============================================
   Dark Theme
   ============================================ */

.dark {
  /* Background colors */
  --background-primary: #0a0a0a;        /* Very dark background */
  --background-secondary: #1a1a1a;      /* Slightly lighter for cards/panels */
  --background-tertiary: #2a2a2a;       /* Hover states */
  --background-overlay: rgba(0, 0, 0, 0.7); /* Modal backdrop */
  
  /* Foreground/Text colors - WCAG AA compliant on dark backgrounds */
  --foreground-primary: #f5f5f5;        /* Primary text - 14.5:1 on #0a0a0a */
  --foreground-secondary: #d4d4d4;      /* Secondary text - 10.4:1 on #0a0a0a */
  --foreground-tertiary: #a3a3a3;       /* Tertiary text - 6.5:1 on #0a0a0a */
  --foreground-disabled: #6b6b6b;       /* Disabled text - 3.5:1 on #0a0a0a */
  --foreground-inverse: #0a0a0a;        /* Text on light backgrounds */
  
  /* Border colors */
  --border-primary: #626262;            /* Primary borders - 3.1:1 on #0a0a0a (FIXED) */
  --border-secondary: #2a2a2a;          /* Subtle borders */
  --border-focus: #60a5fa;              /* Focus indicator */
  
  /* Interactive colors */
  --interactive-primary: #60a5fa;       /* Primary buttons/links - 4.7:1 on #0a0a0a */
  --interactive-primary-hover: #3b82f6; /* Hover state - 6.1:1 on #0a0a0a */
  --interactive-primary-active: #2563eb; /* Active state - 7.8:1 on #0a0a0a */
  --interactive-secondary: #9ca3af;     /* Secondary buttons - 5.5:1 on #0a0a0a */
  --interactive-secondary-hover: #d1d5db; /* Hover state - 9.2:1 on #0a0a0a */
  
  /* Status colors - WCAG AA compliant on dark backgrounds */
  --status-success: #4ade80;            /* Success green - 4.6:1 on #0a0a0a */
  --status-success-bg: #14532d;         /* Success background */
  --status-warning: #fbbf24;            /* Warning yellow - 4.5:1 on #0a0a0a */
  --status-warning-bg: #422006;         /* Warning background */
  --status-error: #f87171;              /* Error red - 4.5:1 on #0a0a0a */
  --status-error-bg: #450a0a;           /* Error background */
  --status-info: #60a5fa;               /* Info blue - 4.7:1 on #0a0a0a */
  --status-info-bg: #1e3a8a;            /* Info background */
  
  /* Message colors */
  --message-user-bg: #1e3a8a;           /* User message background */
  --message-user-text: #bfdbfe;         /* User message text - 7.5:1 on bg */
  --message-agent-bg: #1a1a1a;          /* Agent message background */
  --message-agent-text: #f5f5f5;        /* Agent message text - 14.5:1 on bg */
  
  /* UI component colors */
  --input-bg: #1a1a1a;                  /* Input background */
  --input-border: #3a3a3a;              /* Input border */
  --input-border-focus: #60a5fa;        /* Input focus border */
  --input-text: #f5f5f5;                /* Input text */
  --input-placeholder: #6b6b6b;         /* Placeholder text */
  
  --button-primary-bg: #2563eb;         /* Primary button background */
  --button-primary-text: #ffffff;       /* Primary button text - 7.8:1 on bg */
  --button-primary-hover: #1d4ed8;      /* Primary button hover */
  --button-secondary-bg: #1a1a1a;       /* Secondary button background */
  --button-secondary-text: #f5f5f5;     /* Secondary button text */
  --button-secondary-hover: #2a2a2a;    /* Secondary button hover */
  
  /* Audio visualizer colors */
  --audio-waveform: #60a5fa;            /* Waveform color */
  --audio-waveform-bg: #1a1a1a;         /* Waveform background */
  
  /* Performance monitor colors */
  --perf-good: #4ade80;                 /* FPS ≥60 */
  --perf-medium: #fbbf24;               /* FPS 30-59 */
  --perf-poor: #f87171;                 /* FPS <30 */
  
  /* Avatar customizer colors */
  --swatch-border: #3a3a3a;             /* Color swatch border */
  --swatch-border-selected: #60a5fa;    /* Selected swatch border */
  
  /* Shadows with dark theme opacity */
  --shadow-color: rgba(0, 0, 0, 0.3);
}

/* ============================================
   Base Styles with Theme Support
   ============================================ */

* {
  /* Smooth transitions for theme changes */
  transition: background-color var(--theme-transition-duration) var(--theme-transition-timing),
              color var(--theme-transition-duration) var(--theme-transition-timing),
              border-color var(--theme-transition-duration) var(--theme-transition-timing);
}

/* Disable transitions for elements that shouldn't animate */
*:where(.no-transition, [data-no-transition]) {
  transition: none !important;
}

body {
  color: var(--foreground-primary);
  background: var(--background-primary);
  font-family: var(--font-family-base);
  margin: 0;
  padding: 0;
  min-height: 100vh;
}

/* ============================================
   Typography
   ============================================ */

h1, h2, h3, h4, h5, h6 {
  color: var(--foreground-primary);
  margin: 0;
  font-weight: 600;
}

p {
  color: var(--foreground-primary);
  margin: 0;
}

a {
  color: var(--interactive-primary);
  text-decoration: none;
}

a:hover {
  color: var(--interactive-primary-hover);
  text-decoration: underline;
}

a:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* ============================================
   Form Elements
   ============================================ */

input,
textarea,
select {
  background-color: var(--input-bg);
  color: var(--input-text);
  border: 1px solid var(--input-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  font-family: var(--font-family-base);
  font-size: 1rem;
}

input::placeholder,
textarea::placeholder {
  color: var(--input-placeholder);
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--input-border-focus);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.dark input:focus,
.dark textarea:focus,
.dark select:focus {
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
}

input:disabled,
textarea:disabled,
select:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background-color: var(--background-secondary);
}

/* ============================================
   Buttons
   ============================================ */

button {
  font-family: var(--font-family-base);
  font-size: 1rem;
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  cursor: pointer;
  border: none;
  transition: all var(--theme-transition-duration) var(--theme-transition-timing);
}

button:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  background-color: var(--button-primary-bg);
  color: var(--button-primary-text);
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--button-primary-hover);
}

.btn-secondary {
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border: 1px solid var(--border-primary);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--button-secondary-hover);
}

/* ============================================
   Cards and Panels
   ============================================ */

.card {
  background-color: var(--background-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  box-shadow: var(--shadow-md);
}

.panel {
  background-color: var(--background-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
}

/* ============================================
   Messages
   ============================================ */

.message-user {
  background-color: var(--message-user-bg);
  color: var(--message-user-text);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
}

.message-agent {
  background-color: var(--message-agent-bg);
  color: var(--message-agent-text);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
}

/* ============================================
   Status Indicators
   ============================================ */

.status-success {
  color: var(--status-success);
  background-color: var(--status-success-bg);
}

.status-warning {
  color: var(--status-warning);
  background-color: var(--status-warning-bg);
}

.status-error {
  color: var(--status-error);
  background-color: var(--status-error-bg);
}

.status-info {
  color: var(--status-info);
  background-color: var(--status-info-bg);
}

/* ============================================
   Focus Indicators (Accessibility)
   ============================================ */

*:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* ============================================
   Scrollbars
   ============================================ */

::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: var(--background-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--border-primary);
  border-radius: var(--radius-full);
  border: 2px solid var(--background-secondary);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--foreground-tertiary);
}

/* Firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border-primary) var(--background-secondary);
}

/* ============================================
   Utility Classes
   ============================================ */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .text-primary {
    color: var(--foreground-primary);
  }
  
  .text-secondary {
    color: var(--foreground-secondary);
  }
  
  .text-tertiary {
    color: var(--foreground-tertiary);
  }
  
  .bg-primary {
    background-color: var(--background-primary);
  }
  
  .bg-secondary {
    background-color: var(--background-secondary);
  }
  
  .bg-tertiary {
    background-color: var(--background-tertiary);
  }
  
  .border-primary {
    border-color: var(--border-primary);
  }
  
  .border-secondary {
    border-color: var(--border-secondary);
  }
}

/* ============================================
   Accessibility Utilities
   ============================================ */

/**
 * Screen Reader Only Class
 * 
 * Hides content visually but keeps it accessible to screen readers.
 * Used for announcements and additional context that should only be
 * read by assistive technologies.
 * 
 * Requirement: 36 (Screen Reader Support)
 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/**
 * Focusable Screen Reader Only
 * 
 * Makes sr-only content visible when focused (e.g., skip links).
 */
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ============================================
   High Contrast Mode
   ============================================ */

/**
 * High Contrast Mode
 * 
 * Provides maximum contrast colors for users with visual impairments.
 * Applied when highContrastMode is enabled in UI preferences.
 * Uses pure black and white with high contrast accent colors.
 * 
 * Requirements: 37.7, 37.8
 */

.high-contrast {
  /* Background colors - Maximum contrast */
  --background-primary: #000000;        /* Pure black */
  --background-secondary: #000000;      /* Pure black for consistency */
  --background-tertiary: #1a1a1a;       /* Slightly lighter for hover */
  --background-overlay: rgba(0, 0, 0, 0.95); /* Nearly opaque backdrop */
  
  /* Foreground/Text colors - Maximum contrast */
  --foreground-primary: #ffffff;        /* Pure white - 21:1 on black */
  --foreground-secondary: #ffffff;      /* Pure white for consistency */
  --foreground-tertiary: #ffffff;       /* Pure white for consistency */
  --foreground-disabled: #999999;       /* Light gray - 5.8:1 on black */
  --foreground-inverse: #000000;        /* Black on light backgrounds */
  
  /* Border colors - High contrast */
  --border-primary: #ffffff;            /* White borders - 21:1 on black */
  --border-secondary: #666666;          /* Medium gray - 4.5:1 on black */
  --border-focus: #ffff00;              /* Yellow focus - 19.6:1 on black */
  
  /* Interactive colors - High contrast */
  --interactive-primary: #00ffff;       /* Cyan - 16.7:1 on black */
  --interactive-primary-hover: #00cccc; /* Darker cyan - 12.5:1 on black */
  --interactive-primary-active: #009999; /* Even darker cyan - 8.7:1 on black */
  --interactive-secondary: #ffffff;     /* White - 21:1 on black */
  --interactive-secondary-hover: #cccccc; /* Light gray - 12.6:1 on black */
  
  /* Status colors - High contrast */
  --status-success: #00ff00;            /* Bright green - 15.3:1 on black */
  --status-success-bg: #003300;         /* Dark green background */
  --status-warning: #ffff00;            /* Bright yellow - 19.6:1 on black */
  --status-warning-bg: #333300;         /* Dark yellow background */
  --status-error: #ff0000;              /* Bright red - 5.3:1 on black */
  --status-error-bg: #330000;           /* Dark red background */
  --status-info: #00ffff;               /* Bright cyan - 16.7:1 on black */
  --status-info-bg: #003333;            /* Dark cyan background */
  
  /* Message colors - High contrast */
  --message-user-bg: #003366;           /* Dark blue background */
  --message-user-text: #ffffff;         /* White text - 21:1 on bg */
  --message-agent-bg: #1a1a1a;          /* Dark gray background */
  --message-agent-text: #ffffff;        /* White text - 21:1 on bg */
  
  /* UI component colors - High contrast */
  --input-bg: #000000;                  /* Black background */
  --input-border: #ffffff;              /* White border */
  --input-border-focus: #ffff00;        /* Yellow focus border */
  --input-text: #ffffff;                /* White text */
  --input-placeholder: #999999;         /* Light gray placeholder */
  
  --button-primary-bg: #0066cc;         /* Blue button background */
  --button-primary-text: #ffffff;       /* White text - 8.6:1 on bg */
  --button-primary-hover: #0052a3;      /* Darker blue hover */
  --button-secondary-bg: #333333;       /* Dark gray background */
  --button-secondary-text: #ffffff;     /* White text */
  --button-secondary-hover: #4d4d4d;    /* Lighter gray hover */
  
  /* Audio visualizer colors - High contrast */
  --audio-waveform: #00ffff;            /* Cyan waveform */
  --audio-waveform-bg: #000000;         /* Black background */
  
  /* Performance monitor colors - High contrast */
  --perf-good: #00ff00;                 /* Bright green */
  --perf-medium: #ffff00;               /* Bright yellow */
  --perf-poor: #ff0000;                 /* Bright red */
  
  /* Avatar customizer colors - High contrast */
  --swatch-border: #ffffff;             /* White border */
  --swatch-border-selected: #ffff00;    /* Yellow selected border */
  
  /* Shadows - Removed in high contrast mode */
  --shadow-color: transparent;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
}

/* High contrast mode overrides for specific elements */
.high-contrast * {
  /* Remove subtle shadows and transitions for clarity */
  box-shadow: none !important;
}

.high-contrast a {
  /* Underline all links in high contrast mode */
  text-decoration: underline;
}

.high-contrast button,
.high-contrast input,
.high-contrast textarea,
.high-contrast select {
  /* Ensure all interactive elements have visible borders */
  border: 2px solid var(--border-primary) !important;
}

.high-contrast :focus-visible {
  /* Extra prominent focus indicators */
  outline: 3px solid var(--border-focus) !important;
  outline-offset: 3px !important;
}

/* ============================================
   Non-Color Information Indicators
   ============================================ */

/**
 * Ensure information is not conveyed by color alone (Requirement 37.5)
 * 
 * These classes add visual indicators beyond color to convey status:
 * - Icons for status messages
 * - Patterns for different message types
 * - Text labels in addition to color coding
 */

.status-success::before,
.status-warning::before,
.status-error::before,
.status-info::before {
  /* Add icon indicators to status messages */
  display: inline-block;
  margin-right: 0.5rem;
  font-weight: bold;
}

.status-success::before {
  content: '✓ ';
}

.status-warning::before {
  content: '⚠ ';
}

.status-error::before {
  content: '✗ ';
}

.status-info::before {
  content: 'ℹ ';
}

/* Message type indicators beyond color */
.message-user::before {
  content: 'You: ';
  font-weight: 600;
  display: inline;
}

.message-agent::before {
  content: 'Agent: ';
  font-weight: 600;
  display: inline;
}

/* Performance indicators with text labels */
.perf-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
}

.perf-indicator::after {
  content: attr(data-label);
  font-size: 0.75rem;
  font-weight: 500;
}

/* ============================================
   RTL (Right-to-Left) Language Support
   ============================================ */

/**
 * RTL Language Support
 * 
 * Provides layout and styling adjustments for RTL languages (Arabic, Hebrew, etc.)
 * Applied when dir="rtl" is set on the document root element.
 * 
 * Uses CSS logical properties where possible for automatic RTL support.
 * Includes manual overrides for complex layouts that need explicit mirroring.
 * 
 * Requirements: 56.4
 */

/* CSS Logical Properties - Automatically adapt to text direction */
[dir="rtl"] {
  /* Text alignment */
  --text-align-start: right;
  --text-align-end: left;
  
  /* Spacing */
  --margin-start: margin-right;
  --margin-end: margin-left;
  --padding-start: padding-right;
  --padding-end: padding-left;
  
  /* Borders */
  --border-start: border-right;
  --border-end: border-left;
  
  /* Positioning */
  --inset-start: right;
  --inset-end: left;
}

/* Mirror flex and grid layouts for RTL */
[dir="rtl"] .flex-row {
  flex-direction: row-reverse;
}

[dir="rtl"] .grid-flow-col {
  grid-auto-flow: column reverse;
}

/* Mirror text alignment */
[dir="rtl"] .text-left {
  text-align: right;
}

[dir="rtl"] .text-right {
  text-align: left;
}

/* Mirror margins and padding */
[dir="rtl"] .ml-auto {
  margin-left: 0;
  margin-right: auto;
}

[dir="rtl"] .mr-auto {
  margin-right: 0;
  margin-left: auto;
}

[dir="rtl"] .pl-4 {
  padding-left: 0;
  padding-right: 1rem;
}

[dir="rtl"] .pr-4 {
  padding-right: 0;
  padding-left: 1rem;
}

/* Mirror borders */
[dir="rtl"] .border-l {
  border-left: none;
  border-right: 1px solid;
}

[dir="rtl"] .border-r {
  border-right: none;
  border-left: 1px solid;
}

/* Mirror rounded corners */
[dir="rtl"] .rounded-l {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
}

[dir="rtl"] .rounded-r {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
}

/* Mirror transforms */
[dir="rtl"] .translate-x-4 {
  transform: translateX(-1rem);
}

[dir="rtl"] .translate-x-6 {
  transform: translateX(-1.5rem);
}

/* Mirror icons and arrows */
[dir="rtl"] .icon-arrow-right::before {
  content: '←';
}

[dir="rtl"] .icon-arrow-left::before {
  content: '→';
}

/* Mirror message bubbles */
[dir="rtl"] .message-user {
  margin-left: 0;
  margin-right: auto;
}

[dir="rtl"] .message-agent {
  margin-right: 0;
  margin-left: auto;
}

/* Mirror input groups */
[dir="rtl"] .input-group {
  flex-direction: row-reverse;
}

/* Mirror button groups */
[dir="rtl"] .button-group {
  flex-direction: row-reverse;
}

[dir="rtl"] .button-group > *:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
}

[dir="rtl"] .button-group > *:last-child {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
}

/* Mirror navigation elements */
[dir="rtl"] nav ul {
  flex-direction: row-reverse;
}

/* Mirror dropdown menus */
[dir="rtl"] .dropdown-menu {
  left: auto;
  right: 0;
}

/* Mirror tooltips */
[dir="rtl"] .tooltip-left {
  left: auto;
  right: 100%;
  margin-right: 0.5rem;
  margin-left: 0;
}

[dir="rtl"] .tooltip-right {
  right: auto;
  left: 100%;
  margin-left: 0.5rem;
  margin-right: 0;
}

/* Mirror modal positioning */
[dir="rtl"] .modal-side-panel {
  left: auto;
  right: 0;
}

/* Mirror audio controller layout */
[dir="rtl"] .audio-controller .control-group {
  flex-direction: row-reverse;
}

/* Mirror settings panel tabs */
[dir="rtl"] .settings-tabs {
  flex-direction: row-reverse;
}

/* Mirror avatar customizer swatches */
[dir="rtl"] .color-swatches {
  flex-direction: row-reverse;
}

/* Mirror performance monitor position */
[dir="rtl"] .performance-monitor {
  left: auto;
  right: 1rem;
}

/* Preserve certain elements that should not be mirrored */
[dir="rtl"] .no-rtl-mirror {
  direction: ltr;
}

/* Numbers, dates, and code should remain LTR */
[dir="rtl"] .number,
[dir="rtl"] .date,
[dir="rtl"] .time,
[dir="rtl"] code,
[dir="rtl"] pre {
  direction: ltr;
  text-align: left;
}

/* Icons that represent universal concepts should not be mirrored */
[dir="rtl"] .icon-universal {
  transform: none;
}

/* ============================================
   RTL Utility Classes
   ============================================ */

/**
 * Utility classes for RTL-aware styling
 * Use these classes for elements that need explicit RTL handling
 */

/* Margin start/end (logical properties) */
.ms-0 { margin-inline-start: 0; }
.ms-1 { margin-inline-start: 0.25rem; }
.ms-2 { margin-inline-start: 0.5rem; }
.ms-4 { margin-inline-start: 1rem; }
.ms-auto { margin-inline-start: auto; }

.me-0 { margin-inline-end: 0; }
.me-1 { margin-inline-end: 0.25rem; }
.me-2 { margin-inline-end: 0.5rem; }
.me-4 { margin-inline-end: 1rem; }
.me-auto { margin-inline-end: auto; }

/* Padding start/end (logical properties) */
.ps-0 { padding-inline-start: 0; }
.ps-1 { padding-inline-start: 0.25rem; }
.ps-2 { padding-inline-start: 0.5rem; }
.ps-4 { padding-inline-start: 1rem; }

.pe-0 { padding-inline-end: 0; }
.pe-1 { padding-inline-end: 0.25rem; }
.pe-2 { padding-inline-end: 0.5rem; }
.pe-4 { padding-inline-end: 1rem; }

/* Text alignment (logical properties) */
.text-start { text-align: start; }
.text-end { text-align: end; }

/* Border start/end (logical properties) */
.border-s { border-inline-start: 1px solid var(--border-primary); }
.border-e { border-inline-end: 1px solid var(--border-primary); }

/* Rounded corners start/end (logical properties) */
.rounded-s-md {
  border-start-start-radius: var(--radius-md);
  border-end-start-radius: var(--radius-md);
}

.rounded-e-md {
  border-start-end-radius: var(--radius-md);
  border-end-end-radius: var(--radius-md);
}

/* Positioning start/end (logical properties) */
.inset-s-0 { inset-inline-start: 0; }
.inset-e-0 { inset-inline-end: 0; }

/* ============================================
   RTL Testing Utilities
   ============================================ */

/**
 * Utilities for testing RTL layout during development
 * Add .rtl-debug to any element to visualize RTL-specific styling
 */

.rtl-debug[dir="rtl"] {
  outline: 2px dashed #ff00ff;
  outline-offset: 2px;
}

.rtl-debug[dir="rtl"]::before {
  content: 'RTL';
  position: absolute;
  top: 0;
  right: 0;
  background: #ff00ff;
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: bold;
  z-index: 9999;
}
